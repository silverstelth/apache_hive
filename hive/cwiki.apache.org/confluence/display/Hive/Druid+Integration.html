    

<!DOCTYPE html>
<html lang="en-GB" >

<!-- Mirrored from cwiki.apache.org/confluence/display/Hive/Druid+Integration by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 15 Dec 2021 19:40:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
                            <title>Druid Integration - Apache Hive - Apache Software Foundation</title>
    
        

                        
    
                        
    

                
    
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="/confluence">
<meta id="confluence-base-url" name="confluence-base-url" content="https://cwiki.apache.org/confluence">

    <meta id="atlassian-token" name="atlassian-token" content="d7833c7da397e2f88a76912a1879e0225325829d">


<meta id="confluence-space-key" name="confluence-space-key" content="Hive">
<script type="text/javascript">
        var contextPath = '/confluence';
</script>

    

    <meta name="confluence-request-time" content="1639597131977">
        
    
        
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            <script type="text/x-template" title="gliffy-webpanel-footer">
        <div class="gliffy-webpanel-footer"><span>This Confluence installation runs a Free Gliffy License - Evaluate the <a href="http://www.gliffy.com/products/confluence-plugin/">Gliffy Confluence Plugin</a> for your Wiki!</span></div>
</script>


            <style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="ajs-keyboardshortcut-hash" content="f372abdc7d1a6481c736efc7686d149c">
            <meta id="team-calendars-has-jira-link" content="true">
            <meta name="ajs-team-calendars-display-time-format" content="displayTimeFormat12">
            <meta id="team-calendars-display-week-number" content="false">
            <meta id="team-calendars-user-timezone" content="Etc/UTC">
            <script type="text/x-template" id="team-calendars-messages" title="team-calendars-messages"><fieldset class="i18n hidden"><input type="hidden" name="calendar3.month.long.july" value="July"><input type="hidden" name="calendar3.day.short.wednesday" value="Wed"><input type="hidden" name="calendar3.day.short.thursday" value="Thu"><input type="hidden" name="calendar3.month.short.march" value="Mar"><input type="hidden" name="calendar3.month.long.april" value="April"><input type="hidden" name="calendar3.month.long.october" value="October"><input type="hidden" name="calendar3.month.long.august" value="August"><input type="hidden" name="calendar3.month.short.july" value="Jul"><input type="hidden" name="calendar3.month.short.may" value="May"><input type="hidden" name="calendar3.month.short.november" value="Nov"><input type="hidden" name="calendar3.day.long.friday" value="Friday"><input type="hidden" name="calendar3.day.long.sunday" value="Sunday"><input type="hidden" name="calendar3.day.long.saturday" value="Saturday"><input type="hidden" name="calendar3.month.short.april" value="Apr"><input type="hidden" name="calendar3.day.long.wednesday" value="Wednesday"><input type="hidden" name="calendar3.month.long.december" value="December"><input type="hidden" name="calendar3.month.short.october" value="Oct"><input type="hidden" name="calendar3.day.long.monday" value="Monday"><input type="hidden" name="calendar3.month.short.june" value="Jun"><input type="hidden" name="calendar3.day.short.monday" value="Mon"><input type="hidden" name="calendar3.day.short.tuesday" value="Tue"><input type="hidden" name="calendar3.day.short.saturday" value="Sat"><input type="hidden" name="calendar3.month.long.march" value="March"><input type="hidden" name="calendar3.month.long.june" value="June"><input type="hidden" name="calendar3.month.short.february" value="Feb"><input type="hidden" name="calendar3.month.short.august" value="Aug"><input type="hidden" name="calendar3.month.short.december" value="Dec"><input type="hidden" name="calendar3.day.short.sunday" value="Sun"><input type="hidden" name="calendar3.month.long.february" value="February"><input type="hidden" name="calendar3.day.long.tuesday" value="Tuesday"><input type="hidden" name="calendar3.month.long.may" value="May"><input type="hidden" name="calendar3.month.long.september" value="September"><input type="hidden" name="calendar3.month.long.november" value="November"><input type="hidden" name="calendar3.month.short.january" value="Jan"><input type="hidden" name="calendar3.month.short.september" value="Sep"><input type="hidden" name="calendar3.day.long.thursday" value="Thursday"><input type="hidden" name="calendar3.month.long.january" value="January"><input type="hidden" name="calendar3.day.short.friday" value="Fri"></fieldset></script>
            
    
    
            <meta name="ajs-page-title" content="Druid Integration">
            <meta name="ajs-latest-published-page-title" content="Druid Integration">
            <meta name="ajs-space-name" content="Apache Hive">
            <meta name="ajs-page-id" content="65866491">
            <meta name="ajs-latest-page-id" content="65866491">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-parent-page-title" content="Home">
            <meta name="ajs-parent-page-id" content="27362069">
            <meta name="ajs-space-key" content="Hive">
            <meta name="ajs-max-number-editors" content="12">
            <meta name="ajs-macro-placeholder-timeout" content="5000">
            <meta name="ajs-jira-metadata-count" content="-1">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-can-remove-page-hierarchy" content="false">
            <meta name="ajs-browse-page-tree-mode" content="view">
            <meta name="ajs-shared-drafts" content="true">
            <meta name="ajs-context-path" content="/confluence">
            <meta name="ajs-base-url" content="https://cwiki.apache.org/confluence">
            <meta name="ajs-version-number" content="7.13.2">
            <meta name="ajs-build-number" content="8703">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-remote-user-has-licensed-access" content="false">
            <meta name="ajs-remote-user-has-browse-users-permission" content="false">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-current-user-avatar-uri-reference" content="/confluence/images/icons/profilepics/anonymous.svg">
            <meta name="ajs-static-resource-url-prefix" content="/confluence/s/6dvx22/8703/4mhn8a/_">
            <meta name="ajs-global-settings-attachment-max-size" content="20971520">
            <meta name="ajs-global-settings-quick-search-enabled" content="true">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="site-wide.shared-drafts,site-wide.synchrony,clc.quick.create,confluence.view.edit.transition,cql.search.screen,confluence-inline-comments-resolved,frontend.editor.v4,http.session.registrar,nps.survey.inline.dialog,confluence.efi.onboarding.new.templates,frontend.editor.v4.compatibility,atlassian.cdn.static.assets,pdf-preview,previews.sharing,previews.versions,file-annotations,confluence.efi.onboarding.rich.space.content,collaborative-audit-log,confluence.reindex.improvements,previews.conversion-service,editor.ajax.save,read.only.mode,graphql,previews.trigger-all-file-types,attachment.extracted.text.extractor,lucene.caching.filter,confluence.table.resizable,notification.batch,previews.sharing.pushstate,confluence-inline-comments-rich-editor,tc.tacca.dacca,site-wide.synchrony.opt-in,file-annotations.likes,gatekeeper-ui-v2,v2.content.name.searcher,mobile.supported.version,pulp,confluence-inline-comments,confluence-inline-comments-dangling-comment,quick-reload-inline-comments-flags">
            <meta name="ajs-atl-token" content="d7833c7da397e2f88a76912a1879e0225325829d">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-access-mode" content="READ_WRITE">
            <meta name="ajs-render-mode" content="READ_WRITE">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="https://cwiki.apache.org/confluence/s/6dvx22/8703/4mhn8a/1/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://cwiki.apache.org/confluence/s/6dvx22/8703/4mhn8a/1/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://cwiki.apache.org/confluence/opensearch/osd.action" title="Apache Software Foundation"/>
    
                    
            <meta name="ajs-create-issue-metadata-show-discovery" content="false">
            

    <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\u0022\u005C/confluence\u0022";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.confluence.plugins.synchrony-interop:synchrony-status-banner-loader.synchrony-status"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.applinks-help-paths"]="{\u0022entries\u0022:{\u0022applinks.docs.root\u0022:\u0022https://confluence.atlassian.com/display/APPLINKS-072/\u0022,\u0022applinks.docs.diagnostics.troubleshoot.sslunmatched\u0022:\u0022SSL+and+application+link+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthsignatureinvalid\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthtimestamprefused\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.delete.entity.link\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.adding.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.administration.guide\u0022:\u0022Application+Links+Documentation\u0022,\u0022applinks.docs.oauth.security\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.troubleshoot.application.links\u0022:\u0022Troubleshoot+application+links\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unknownerror\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.trusted.apps\u0022:\u0022Configuring+Trusted+Applications+authentication+for+an+application+link\u0022,\u0022applinks.docs.diagnostics.troubleshoot.authlevelunsupported\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.ssluntrusted\u0022:\u0022SSL+and+application+link+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unknownhost\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.delete.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.adding.project.link\u0022:\u0022Configuring+Project+links+across+Applications\u0022,\u0022applinks.docs.link.applications\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthproblem\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.migration\u0022:\u0022Update+application+links+to+use+OAuth\u0022,\u0022applinks.docs.relocate.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.administering.entity.links\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.upgrade.application.link\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.diagnostics.troubleshoot.connectionrefused\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.oauth\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.insufficient.remote.permission\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.configuring.application.link.auth\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.diagnostics\u0022:\u0022Application+links+diagnostics\u0022,\u0022applinks.docs.configured.authentication.types\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.adding.entity.link\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unexpectedresponse\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.basic\u0022:\u0022Configuring+Basic+HTTP+Authentication+for+an+Application+Link\u0022,\u0022applinks.docs.diagnostics.troubleshoot.authlevelmismatch\u0022:\u0022OAuth+troubleshooting+guide\u0022}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.applinks-types"]="{\u0022crowd\u0022:\u0022Crowd\u0022,\u0022confluence\u0022:\u0022Confluence\u0022,\u0022fecru\u0022:\u0022FishEye / Crucible\u0022,\u0022stash\u0022:\u0022Stash\u0022,\u0022jira\u0022:\u0022Jira\u0022,\u0022refapp\u0022:\u0022Reference Application\u0022,\u0022bamboo\u0022:\u0022Bamboo\u0022,\u0022generic\u0022:\u0022Generic Application\u0022}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.entity-types"]="{\u0022singular\u0022:{\u0022refapp.charlie\u0022:\u0022Charlie\u0022,\u0022fecru.project\u0022:\u0022Crucible Project\u0022,\u0022fecru.repository\u0022:\u0022FishEye Repository\u0022,\u0022stash.project\u0022:\u0022Stash Project\u0022,\u0022generic.entity\u0022:\u0022Generic Project\u0022,\u0022confluence.space\u0022:\u0022Confluence Space\u0022,\u0022bamboo.project\u0022:\u0022Bamboo Project\u0022,\u0022jira.project\u0022:\u0022Jira Project\u0022},\u0022plural\u0022:{\u0022refapp.charlie\u0022:\u0022Charlies\u0022,\u0022fecru.project\u0022:\u0022Crucible Projects\u0022,\u0022fecru.repository\u0022:\u0022FishEye Repositories\u0022,\u0022stash.project\u0022:\u0022Stash Projects\u0022,\u0022generic.entity\u0022:\u0022Generic Projects\u0022,\u0022confluence.space\u0022:\u0022Confluence Spaces\u0022,\u0022bamboo.project\u0022:\u0022Bamboo Projects\u0022,\u0022jira.project\u0022:\u0022Jira Projects\u0022}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.authentication-types"]="{\u0022com.atlassian.applinks.api.auth.types.BasicAuthenticationProvider\u0022:\u0022Basic Access\u0022,\u0022com.atlassian.applinks.api.auth.types.TrustedAppsAuthenticationProvider\u0022:\u0022Trusted Applications\u0022,\u0022com.atlassian.applinks.api.auth.types.CorsAuthenticationProvider\u0022:\u0022CORS\u0022,\u0022com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider\u0022:\u0022OAuth\u0022,\u0022com.atlassian.applinks.api.auth.types.TwoLeggedOAuthAuthenticationProvider\u0022:\u0022OAuth\u0022,\u0022com.atlassian.applinks.api.auth.types.TwoLeggedOAuthWithImpersonationAuthenticationProvider\u0022:\u0022OAuth\u0022}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\u0022daysBeforeLicenseExpiry\u0022:0,\u0022daysBeforeMaintenanceExpiry\u0022:0,\u0022showLicenseExpiryBanner\u0022:false,\u0022showMaintenanceExpiryBanner\u0022:false,\u0022renewUrl\u0022:null,\u0022salesUrl\u0022:null}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-search-ui-plugin:confluence-search-ui-plugin-resources.i18n-data"]="{\u0022search.ui.recent.link.text\u0022:\u0022View more recently visited\u0022,\u0022search.ui.filter.space.category.input.label\u0022:\u0022Find space categories...\u0022,\u0022search.ui.search.results.empty\u0022:\u0022We couldn\u005Cu0027\u005Cu0027t find anything matching \u005C\u0022{0}\u005C\u0022.\u0022,\u0022search.ui.filter.clear.selected\u0022:\u0022Clear selected items\u0022,\u0022search.ui.content.name.search.items.panel.load.all.top.items.button.text\u0022:\u0022Show more app results...\u0022,\u0022search.ui.filter.space.archive.label\u0022:\u0022Search archived spaces\u0022,\u0022search.ui.filter.label\u0022:\u0022filter\u0022,\u0022search.ui.filter.contributor.button.text\u0022:\u0022Contributor\u0022,\u0022search.ui.filter.date.all.text\u0022:\u0022Any time\u0022,\u0022search.ui.filter.space.current.label\u0022:\u0022CURRENT\u0022,\u0022search.ui.clear.input.button.text\u0022:\u0022Clear text\u0022,\u0022search.ui.search.results.clear.button\u0022:\u0022clear your filters.\u0022,\u0022search.ui.filter.date.hour.text\u0022:\u0022The past day\u0022,\u0022help.search.ui.link.title\u0022:\u0022Search tips\u0022,\u0022search.ui.filters.heading\u0022:\u0022Filter by\u0022,\u0022search.ui.filter.label.input.label\u0022:\u0022Find labels...\u0022,\u0022search.ui.recent.items.anonymous\u0022:\u0022Start exploring. Your search results will appear here.\u0022,\u0022search.ui.filter.date.month.text\u0022:\u0022The past month\u0022,\u0022search.ui.input.label\u0022:\u0022Search\u0022,\u0022search.ui.search.result\u0022:\u0022{0,choice,1#{0} search result|1\u005Cu003c{0} search results}\u0022,\u0022search.ui.infinite.scroll.button.text\u0022:\u0022More results\u0022,\u0022search.ui.filter.date.button.text\u0022:\u0022Date\u0022,\u0022search.ui.filter.date.week.text\u0022:\u0022The past week\u0022,\u0022search.ui.filter.label.button.text\u0022:\u0022Label\u0022,\u0022search.ui.input.alert\u0022:\u0022Hit enter to search\u0022,\u0022search.ui.result.subtitle.calendar\u0022:\u0022Team calendar\u0022,\u0022search.ui.filter.no.result.text\u0022:\u0022We can\u005Cu0027\u005Cu0027t find anything matching your search\u0022,\u0022search.ui.filter.date.heading\u0022:\u0022Last modified within\u0022,\u0022search.ui.result.subtitle.user\u0022:\u0022User profile\u0022,\u0022search.ui.filter.contributor.input.label\u0022:\u0022Find people...\u0022,\u0022search.ui.filter.content.type.button.text\u0022:\u0022Type\u0022,\u0022search.ui.filter.space.input.label\u0022:\u0022Find spaces...\u0022,\u0022search.ui.filter.date.year.text\u0022:\u0022The past year\u0022,\u0022search.ui.advanced.search.link.text\u0022:\u0022Advanced search\u0022,\u0022search.ui.filter.space.button.text\u0022:\u0022Space\u0022,\u0022search.ui.generic.error\u0022:\u0022Something went wrong. Refresh the page, or contact your admin if this keeps happening.\u0022,\u0022search.ui.recent.spaces\u0022:\u0022Recent Spaces\u0022,\u0022search.ui.search.results.clear.line2\u0022:\u0022Try a different search term or\u0022,\u0022search.ui.filter.space.category.button.text\u0022:\u0022Space category\u0022,\u0022search.ui.search.results.clear.line1\u0022:\u0022We couldn\u005Cu0027\u005Cu0027t find anything matching your search.\u0022,\u0022search.ui.content.name.search.items.panel.load.all.top.items.admin.button.text\u0022:\u0022Show more settings and app results...\u0022,\u0022search.ui.recent.pages\u0022:\u0022Recently visited\u0022,\u0022search.ui.search.result.anonymous\u0022:\u0022{0,choice,1#{0} search result|1\u005Cu003c{0} search results}. Have an account? {1}Log in{2} to expand your search.\u0022,\u0022search.ui.recent.items.empty\u0022:\u0022Start exploring. Pages and spaces you\u005Cu0027\u005Cu0027ve visited recently will appear here.\u0022,\u0022search.ui.result.subtitle.space\u0022:\u0022Space\u0022,\u0022search.ui.filter.space.init.heading\u0022:\u0022recent spaces\u0022}";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<link type="text/css" rel="stylesheet" href="../../s/ad0cdaf669e3a7800fb6fa6452e260e4-CDN/6dvx22/8703/4mhn8a/6b1577085985a611eea3c1e80e0e7e93/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all">
<link type="text/css" rel="stylesheet" href="../../s/585884a9f3984b0aaecef0baf40c1e6e-CDN/6dvx22/8703/4mhn8a/e6aaebbd7baa9a045ec96374ae08d3b2/_/download/contextbatch/css/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batch1203.css?gatekeeper-ui-v2=true&amp;highlightactions=true&amp;hostenabled=true" data-wrm-key="atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments,-_super" data-wrm-batch-type="context" media="all">
<script type="text/javascript" src="../../s/58e418cc99c782d6bf891d0ee81d3e82-CDN/6dvx22/8703/4mhn8a/6b1577085985a611eea3c1e80e0e7e93/_/download/contextbatch/js/_super/batch6116.js?locale=en-GB" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script>
<script type="text/javascript" src="../../s/d8f9091841663d4e3446e48379e476f1-CDN/6dvx22/8703/4mhn8a/e6aaebbd7baa9a045ec96374ae08d3b2/_/download/contextbatch/js/atl.confluence.plugins.pagetree-desktop%2cmain%2cvi/batch3a32.js?gatekeeper-ui-v2=true&amp;highlightactions=true&amp;hostenabled=true&amp;locale=en-GB" data-wrm-key="atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments,-_super" data-wrm-batch-type="context" data-initially-rendered></script>

    

        
    

        
        <meta name="ajs-site-title" content="Apache Software Foundation" />
            
    

    
                <link rel="canonical" href="Druid%2bIntegration.html">
        <link rel="shortlink" href="https://cwiki.apache.org/confluence/x/_wrtAw">
    <meta name="wikilink" content="[Hive:Druid Integration]">
    <meta name="page-version" content="22">
    <meta name="ajs-page-version" content="22">

</head>

    
<body      id="com-atlassian-confluence" class="theme-default  aui-layout aui-theme-default">

        
            

<fieldset class="parameters hidden" style="display: none;">
            <input type="hidden" id="listAnalyticsKey" value="19"/>
        <input type="hidden" id="listAnalyticsDomain" value="comalatech.matomo.cloud"/>
    </fieldset>
            <div id='stp-licenseStatus-banner'></div>
    <ul id="assistive-skip-links" class="assistive">
    <li><a href="#title-heading">Skip to content</a></li>
    <li><a href="#breadcrumbs">Skip to breadcrumbs</a></li>
    <li><a href="#header-menu-bar">Skip to header menu</a></li>
    <li><a href="#navigation">Skip to action menu</a></li>
    <li><a href="#quick-search-query">Skip to quick search</a></li>
</ul>
<div id="page">
<div id="full-height-container">
    <div id="header-precursor">
        <div class="cell">
            
                            </div>
    </div>
        





<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" aria-label="Site"><div class="aui-header-inner"><div class="aui-header-before"><button class=" aui-dropdown2-trigger app-switcher-trigger aui-dropdown2-trigger-arrowless" aria-controls="app-switcher" aria-haspopup="true" role="button" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></button><div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" hidden data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}"><div class="app-switcher-loading">Loading&hellip;</div></div></div><div class="aui-header-primary"><span id="logo" class="aui-header-logo aui-header-logo-confluence"><a href="https://cwiki.apache.org/confluence/" aria-label="Go to home page"><span class="aui-header-logo-device">Apache Software Foundation</span></a></span><ul class="aui-nav">
                            <li>
            
        
        
<a  id="space-directory-link" href="https://cwiki.apache.org/confluence/spacedirectory/view.action"  class=" aui-nav-imagelink"   title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                                <li class="aui-buttons">
            </li>
</ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
                        <li>
        <div id="search-ui" class="aui-quicksearch dont-default-focus header-quicksearch"><input id="quick-search-query" aria-label="Search" placeholder="Search" type="text" /><div id="quick-search-alert" role="alert">Hit enter to search</div><aui-spinner size="small"></aui-spinner></div>
    </li>
        <li>
            
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" href="#" aria-haspopup="true" aria-owns="help-menu-link-content" title="Help">
        <span class="aui-icon aui-icon-small aui-iconfont-question-filled">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul  id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
        
            
<a  id="confluence-help-link" href="https://docs.atlassian.com/confluence/docs-713/" class="    "      title="Visit the Confluence documentation home"  target="_blank"
>
        Online Help
</a>
</li>
                                            <li>
    
            
<a  id="keyboard-shortcuts-link" href="https://cwiki.apache.org/confluence" class="    "      title="View available keyboard shortcuts" >
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a  id="feed-builder-link" href="https://cwiki.apache.org/confluence/dashboard/configurerssfeed.action" class="    "      title="Create your custom RSS feed." >
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="https://docs.atlassian.com/confluence/docs-713/help.whats.new.iframe.link" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="https://confluence.atlassian.com/display/DOC/Confluence+7.13+Release+Notes" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
            
<a  id="gadget-directory-link" href="https://cwiki.apache.org/confluence" class="   user-item administration-link "      title="Browse gadgets provided by Confluence" >
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a  id="confluence-about-link" href="https://cwiki.apache.org/confluence/aboutconfluencepage.action" class="    "      title="Get more information about Confluence" >
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
    </li>
        <li>
                
    
    </li>
        <li>
            
    </li>
        <li>
                                            <li>
        
            
<a  id="login-link" href="https://cwiki.apache.org/confluence/login.action?os_destination=%2Fdisplay%2FHive%2FDruid%2BIntegration" class="   user-item login-link "      title="" >
        Log in
</a>
</li>
                        <li>
    
            
<a  id="signup-link" href="https://cwiki.apache.org/confluence/signup.action" class="   user-item signup-link "      title="" >
        Sign up
</a>
</li>
                        
    </li>
    </ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>
    

    
    	<div class="ia-splitter">
    		<div class="ia-splitter-left">
    			<div class="ia-fixed-sidebar">
                                            
                            <div class="acs-side-bar ia-scrollable-section"><div class="acs-side-bar-space-info tipsy-enabled" data-configure-tooltip="Edit space details"><div class="avatar"><div class="space-logo" data-key="Hive" data-name="Apache Hive" data-entity-type="confluence.space"><div class="avatar-img-container"><div class="avatar-img-wrapper"><a href="Home.html" title="Apache Hive"><img class="avatar-img" src="https://cwiki.apache.org/confluence/download/attachments/27362113/Hive?version=2&amp;modificationDate=1317659390000&amp;api=v2" alt="Apache Hive"></a></div></div></div></div><div class="space-information-container"><div class="name"><a href="Home.html" title="Apache Hive">Apache Hive</a></div><div class="flyout-handle icon aui-icon aui-icon-small aui-iconfont-edit"></div></div></div><div class="acs-side-bar-content"><div class="acs-nav-wrapper"><div class="acs-nav" data-has-create-permission="false" data-quick-links-state="null" data-page-tree-state="null" data-nav-type="pages"><div class="acs-nav-sections"><div class="main-links-section "><ul class="acs-nav-list"><li class="acs-nav-item wiki current-item" aria-current="true" data-collector-key="spacebar-pages"><a class="acs-nav-item-link tipsy-enabled" href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive" data-collapsed-tooltip="Pages"><span class="icon"></span><span class="acs-nav-item-label">Pages</span></a></li><li class="acs-nav-item blog" data-collector-key="spacebar-blogs"><a class="acs-nav-item-link tipsy-enabled" href="https://cwiki.apache.org/confluence/pages/viewrecentblogposts.action?key=Hive" data-collapsed-tooltip="Blog"><span class="icon"></span><span class="acs-nav-item-label">Blog</span></a></li></ul></div><div class="quick-links-wrapper"><h5 class="ia-quick-links-header-title">Space shortcuts</h5><div class="quick-links-section tipsy-enabled "><ul class="acs-nav-list"><li class="acs-nav-item pinned_page blueprint kb-how-to-article"><a class="acs-nav-item-link tipsy-enabled" href="How-to%2barticles.html" data-collapsed-tooltip="null"><span class="icon"></span><span class="acs-nav-item-label">How-to articles</span></a></li></ul></div></div></div></div></div><div class="ia-secondary-container tipsy-enabled" data-tree-type="pages"><div class="ia-secondary-header"><h5 class="ia-secondary-header-title pages"><span class="label">Child pages</span></h5></div><div class="ia-secondary-parent-content"><ul class="parent ia-secondary-header-title wiki"><li class="parent-item"><a class="parent-item-link" href="Home.html" title="Home"><span class="icon"></span><span class="label">Home</span></a></li></ul></div><div class="ia-secondary-current-content"><ul class="ia-secondary-currentPage-title wiki current-item"><li><span class="icon"></span><span class="label">Druid Integration</span></li></ul></div><div class="ia-secondary-content"><div class="contextual-nav-child-pages"></div></div></div></div><div class="hidden"><a href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive" id="space-pages-link"></a><script type="text/x-template" title="logo-config-content"><h2>Space Details</h2><div class="personal-space-logo-hint">Your profile picture is used as the logo for your personal space. <a href="/confluence/users/profile/editmyprofilepicture.action" target="_blank">Change your profile picture</a>.</div></script></div></div><div class="space-tools-section"><div id="space-tools-menu-additional-items" class="hidden"><div data-label="Browse pages" data-class="" data-href="/confluence/pages/reorderpages.action?key=Hive">Browse pages</div></div><button id="space-tools-menu-trigger"  class=" aui-dropdown2-trigger aui-button aui-button-subtle tipsy-enabled aui-dropdown2-trigger-arrowless " aria-controls="space-tools-menu" aria-haspopup="true" role="button" data-aui-trigger><span class="aui-icon aui-icon-small aui-iconfont-configure">Configure</span><span class="aui-button-label">Space tools</span><span class="aui-icon "></span></button><div id="space-tools-menu" class="aui-dropdown2 aui-style-default space-tools-dropdown" role="menu" hidden data-aui-alignment="top left"></div><a href="#" role="button" class="expand-collapse-trigger aui-icon aui-icon-small aui-iconfont-chevron-double-left" aria-expanded="true"></a></div>
                    
                        			</div>
    		</div>
        <!-- \#header -->

            
    
        <div id="main" class=" aui-page-panel">
                        <div id="main-header">
                        
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                            
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-label="More options" aria-owns="action-menu" data-container="#navigation">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more" aria-label="More options"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                            <div class="aui-dropdown2-section">
                    <ul  id="action-menu-primary"                         class="section-primary first">
                                                    <li>

    
        
    
                                                        
    
    
            <a  id="view-attachments-link" href="https://cwiki.apache.org/confluence/pages/viewpageattachments.action?pageId=65866491" rel="nofollow" class="action-view-attachments"  accessKey="t"  title="View Attachments" >
                        <span>
                                A<u>t</u>tachments (0)
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="action-view-history-link" href="https://cwiki.apache.org/confluence/pages/viewpreviousversions.action?pageId=65866491" rel="nofollow" class="action-view-history"   title="" >
                        <span>
                                Page History
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="who-can-view-button-ak-button" href="https://cwiki.apache.org/confluence" rel="nofollow" class="who-can-view-link"   title="" >
                        <span>
                                People who can view
            </span>        </a>
    </li>
                                        </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul  id="action-menu-secondary"                         class="section-secondary">
                                                    <li>

    
        
    
                                                        
    
    
            <a  id="view-resolved-comments" href="https://cwiki.apache.org/confluence" rel="nofollow" class=""   title="" >
                        <span>
                                Resolved comments
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="view-page-info-link" href="https://cwiki.apache.org/confluence/pages/viewinfo.action?pageId=65866491" rel="nofollow" class="action-view-info"   title="" >
                        <span>
                                Page Information
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="view-in-hierarchy-link" href="https://cwiki.apache.org/confluence/pages/reorderpages.action?key=Hive&amp;openId=65866491#selectedPageInHierarchy" rel="nofollow" class=""   title="" >
                        <span>
                                View in Hierarchy
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="action-view-source-link" href="https://cwiki.apache.org/confluence/plugins/viewsource/viewpagesrc.action?pageId=65866491" rel="nofollow" class="action-view-source popup-link"   title="" >
                        <span>
                                View Source
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="delete-all-comments-link-link" href="https://cwiki.apache.org/confluence/plugins/aptis/deleteAllComments/ask-user.action?pageId=65866491" rel="nofollow" class=""   title="" >
                        <span>
                                Delete comments
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="action-export-pdf-link" href="https://cwiki.apache.org/confluence/spaces/flyingpdf/pdfpageexport.action?pageId=65866491" rel="nofollow" class=""   title="" >
                        <span>
                                Export to PDF
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="com-k15t-confluence-scroll-epub-launcher" href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=65866491" rel="nofollow" class=""   title="" >
                        <span>
                                Export to EPUB
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a  id="action-export-word-link" href="https://cwiki.apache.org/confluence/exportword?pageId=65866491" rel="nofollow" class="action-export-word"   title="" >
                        <span>
                                Export to Word
            </span>        </a>
    </li>
                                        </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul  id="action-menu-modify"                         class="section-modify">
                                                    <li>

    
        
    
                                                        
    
    
            <a  id="treecopy-action" href="https://cwiki.apache.org/confluence/plugins/tree-copy/preparing-copying.action?pageId=65866491" rel="nofollow" class=""   title="" >
                        <span>
                                Copy Page Tree
            </span>        </a>
    </li>
                                        </ul>
                </div>
                    </div>
    </li>
            </ul>
    </div>

            
            <div id="title-heading" class="pagetitle with-breadcrumbs">
                
                                    <div id="breadcrumb-section">
                        
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first" >
                        
                            <span class=""><a href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive">Pages</a></span>
                                                                                    
                        
        <li>
                        
                            <span class=""><a href="Home.html">Home</a></span>
                                                                    </ol>


                    </div>
                
                
        <a href="#page-banner-end" class="assistive">Skip to end of banner</a>
<div id="page-banner-start" class="assistive"></div>

                    
            <div id="page-metadata-banner"><ul class="banner"><li id="system-content-items" class="noprint"><a href="#" title="Unrestricted" id="content-metadata-page-restrictions-hidden" class="hidden"></a></li><li class="page-metadata-item noprinthas-button"  id="content-metadata-jira-wrapper"><a href="#" title="" id="content-metadata-jira" class="aui-button aui-button-subtle content-metadata-jira tipsy-disabled hidden"><span>Jira links</span></a></li></ul></div>
            

<a href="#page-banner-start" class="assistive">Go to start of banner</a>
<div id="page-banner-end" class="assistive"></div>
    

                <h1 id="title-text" class="with-breadcrumbs">
                                                <a href="Druid%2bIntegration.html">Druid Integration</a>
                                    </h1>
            </div>
        </div><!-- \#main-header -->
        
        

        <div id="sidebar-container">
                                                </div><!-- \#sidebar-container -->

        
    

        




            
    

                                
    

    
    
        
    
    
                    
    

    

    
            
        

    
    

    
            
        



    
<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



            <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/confluence/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
            

        
                            
    

                    

        
        <a href="#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
            <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class='author'>     <a href="https://cwiki.apache.org/confluence/login.action?os_destination=%2Fusers%2Fviewuserprofile.action%3Fusername%3Djcamachorodriguez&amp;permissionViolation=true"
                       class="url fn"
                            >Jesús Camacho Rodríguez</a></span>, last modified by <span class='editor'>     <a href="https://cwiki.apache.org/confluence/login.action?os_destination=%2Fusers%2Fviewuserprofile.action%3Fusername%3Dnishantbangarwa&amp;permissionViolation=true"
                       class="url fn"
                            >Nishant</a></span> on <a class='last-modified' title='Show changes' href='https://cwiki.apache.org/confluence/pages/diffpagesbyversion.action?pageId=65866491&amp;selectedPageVersions=21&amp;selectedPageVersions=22'>Oct 03, 2018</a>
                </li>
        </ul>
    </div>


<a href="#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
                                            
        <div id="main-content" class="wiki-content">
                           
        <p><div class="toc-macro client-side-toc-macro  conf-macro output-block" data-headerelements="H1,H2,H3,H4,H5,H6,H7" data-hasbody="false" data-macro-name="toc"> </div></p><p> </p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Version information</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Druid integration is introduced in Hive 2.2.0 (<a href="https://issues.apache.org/jira/browse/HIVE-14217" style="text-decoration: underline;" class="external-link" rel="nofollow">HIVE-14217</a>). Initially it was compatible with Druid 0.9.1.1, the latest stable release of Druid to that date.</p></div></div><h1 id="DruidIntegration-Introduction">Introduction</h1><p>This page documents the work done for the integration between Druid and Hive, which was started in <a href="https://issues.apache.org/jira/browse/HIVE-14217" class="external-link" rel="nofollow">HIVE-14217</a>.</p><h2 id="DruidIntegration-Objectives">Objectives</h2><p>Our main <strong>goal</strong> is to be able to index data from Hive into Druid, and to be able to query Druid datasources from Hive. Completing this work will bring benefits to the Druid and Hive systems alike:</p><ul style="list-style-type: square;"><li><span style="line-height: 1.42857;"><em>Efficient execution of OLAP queries in Hive.</em> Druid is a system specially well tailored towards the execution of OLAP queries on event data. Hive will be able to take advantage of its efficiency for the execution of this type of queries.</span></li><li><span style="line-height: 1.42857;"><em>Introducing a SQL interface on top of Druid.</em> Druid queries are expressed in JSON, and Druid is queried through a REST API over HTTP. Once a user has declared a Hive table that is stored in Druid, we will be able to transparently generate Druid JSON queries from the input Hive SQL queries.</span></li><li><span style="line-height: 1.42857;"><em>Being able to execute complex operations on Druid data.</em> There are multiple operations that Druid does not support natively yet, e.g. joins. Putting Hive on top of Druid will enable the execution of more complex queries on Druid data sources. </span></li><li><span><em>Indexing complex query results in Druid using Hive.</em> Currently, indexing in Druid is usually done through MapReduce jobs. We will enable Hive to index the results of a given query directly into Druid, e.g., as a new table or a materialized view (<a href="https://issues.apache.org/jira/browse/HIVE-10459" class="external-link" rel="nofollow">HIVE-10459</a>), and start querying and using that dataset immediately.</span><span style="line-height: 1.42857;"><br/></span></li></ul><p>The initial implementation, started in <a href="https://issues.apache.org/jira/browse/HIVE-14217" class="external-link" rel="nofollow">HIVE-14217</a>, focused on 1) enabling the discovery of data that is already stored in Druid from Hive, and 2) being able to query that data, trying to make use of Druid advanced querying capabilities. For instance, we put special emphasis on pushing as much computation as possible to Druid, and being able to recognize the type of queries for which Druid is specially efficient, e.g. <em><a href="http://druid.io/docs/0.9.1.1/querying/timeseriesquery.html" class="external-link" rel="nofollow">timeseries</a></em> or <em><a href="http://druid.io/docs/0.9.1.1/querying/groupbyquery.html" class="external-link" rel="nofollow">groupBy</a></em> queries.</p><p>Future work after the first step is completed is being listed in <a href="https://issues.apache.org/jira/browse/HIVE-14473" class="external-link" rel="nofollow">HIVE-14473</a>. If you want to collaborate on this effort, a list of remaining issues can be found at the end of this document.</p><h1 id="DruidIntegration-Preliminaries">Preliminaries</h1><p>Before going into further detail, we introduce some background that the reader needs to be aware of in order to understand this document.</p><h2 id="DruidIntegration-Druid">Druid</h2><p>Druid is an open-source analytics data store designed for business intelligence (OLAP) queries on event data. Druid provides low latency (real-time) data ingestion, flexible data exploration, and fast data aggregation. Existing Druid deployments have scaled to trillions of events and petabytes of data. Druid is most commonly used to power user-facing analytic applications. You can find more information about Druid <a href="http://druid.io/" class="external-link" rel="nofollow">here</a>. </p><h2 id="DruidIntegration-StorageHandlers">Storage Handlers</h2><p>You can find an overview of Hive Storage Handlers <a href="StorageHandlers.html">here</a>; the integration of Druid with Hive depends upon that framework.</p><h1 id="DruidIntegration-Usage">Usage</h1><p>For the running examples, we use the <em><a href="http://druid.io/docs/latest/tutorials/tutorial-batch.html" class="external-link" rel="nofollow">wikiticker</a></em> dataset included in the quickstart tutorial of Druid.</p><h2 id="DruidIntegration-DiscoveryandmanagementofDruiddatasourcesfromHive">Discovery and management of Druid datasources from Hive</h2><p>First we focus on the discovery and management of Druid datasources from Hive.</p><h3 id="DruidIntegration-CreatetableslinkedtoexistingDruiddatasources">Create tables linked to existing Druid datasources</h3><p>Assume that we have already stored the <em>wikiticker</em> dataset mentioned previously in Druid, and the address of the Druid broker is <em>10.5.0.10:8082</em>.</p><p>First, you need to set the Hive property <code>hive.druid.broker.address.default</code> in your configuration to point to the broker address:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">SET hive.druid.broker.address.default=10.5.0.10:8082;</pre>
</div></div><p>Then, to create a table that we can query from Hive, we execute the following statement in Hive:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">CREATE EXTERNAL TABLE druid_table_1
STORED BY 'org.apache.hadoop.hive.druid.DruidStorageHandler'
TBLPROPERTIES (&quot;druid.datasource&quot; = &quot;wikiticker&quot;);</pre>
</div></div><p><span style="line-height: 1.42857;">Observe that you need to specify the</span><span style="line-height: 1.42857;"> </span><em style="line-height: 1.42857;">datasource</em><span style="line-height: 1.42857;"> as TBLPROPERTIES using the</span><span style="line-height: 1.42857;"> </span><code style="line-height: 1.42857;">druid.datasource</code><span style="line-height: 1.42857;"> property. Further, observe that the table needs to be created as </span><em style="line-height: 1.42857;">EXTERNAL</em><span style="line-height: 1.42857;">, as data is stored in Druid. The table is just a logical entity that we will use to express our queries, but </span><em style="line-height: 1.42857;">there is no data movement when we create the table</em><span style="line-height: 1.42857;">. In fact, what happened under the hood when you execute that statement, is that Hive sends a </span><em style="line-height: 1.42857;"><a href="http://druid.io/docs/0.9.1.1/querying/segmentmetadataquery.html" style="line-height: 1.42857;" class="external-link" rel="nofollow">segment metadata</a></em><span style="line-height: 1.42857;"> query to Druid in order to discover the schema (columns and their types) of the data source. Retrieval of other information that might be useful such as statistics e.g. number of rows, is in our roadmap, but it is not supported yet. Finally</span>, note that if we change the Hive property value for the default broker address, queries on this table will automatically run against the new broker address, as the address is not stored with the table.</p><p>If we execute a <em>DESCRIBE</em> statement, we can actually see the information about the table:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">hive&gt; DESCRIBE FORMATTED druid_table_1;
OK
# col_name            	data_type           	comment
__time              	timestamp           	from deserializer
added               	bigint              	from deserializer
channel             	string              	from deserializer
cityname            	string              	from deserializer
comment             	string              	from deserializer
count               	bigint              	from deserializer
countryisocode      	string              	from deserializer
countryname         	string              	from deserializer
deleted             	bigint              	from deserializer
delta               	bigint              	from deserializer
isanonymous         	string              	from deserializer
isminor             	string              	from deserializer
isnew               	string              	from deserializer
isrobot             	string              	from deserializer
isunpatrolled       	string              	from deserializer
metrocode           	string              	from deserializer
namespace           	string              	from deserializer
page                	string              	from deserializer
regionisocode       	string              	from deserializer
regionname          	string              	from deserializer
user                	string              	from deserializer
user_unique         	string              	from deserializer
# Detailed Table Information
Database:           	druid
Owner:              	user1
CreateTime:         	Thu Aug 18 19:09:10 BST 2016
LastAccessTime:     	UNKNOWN
Retention:          	0
Location:           	hdfs:/tmp/user1/hive/warehouse/druid.db/druid_table_1
Table Type:         	EXTERNAL_TABLE
Table Parameters:
	COLUMN_STATS_ACCURATE	{\&quot;BASIC_STATS\&quot;:\&quot;true\&quot;}
	EXTERNAL            	TRUE
	druid.datasource    	wikiticker
	numFiles            	0
	numRows             	0
	rawDataSize         	0
	storage_handler     	org.apache.hadoop.hive.druid.DruidStorageHandler
	totalSize           	0
	transient_lastDdlTime	1471543750
# Storage Information
SerDe Library:      	org.apache.hadoop.hive.druid.serde.DruidSerDe
InputFormat:        	null
OutputFormat:       	null
Compressed:         	No
Num Buckets:        	-1
Bucket Columns:     	[]
Sort Columns:       	[]
Storage Desc Params:
	serialization.format	1
Time taken: 0.111 seconds, Fetched: 55 row(s)</pre>
</div></div><p>We can see there are three different groups of columns corresponding to the Druid categories: the <strong>timestamp</strong> column (<code>__time</code>) mandatory in Druid, the <strong>dimension</strong> columns (whose type is STRING), and the <strong>metrics</strong> columns (all the rest).</p><h3 id="DruidIntegration-CreateDruiddatasourcesfromHive">Create Druid datasources from Hive</h3><p>If we want to manage the data in the Druid datasources from Hive, there are multiple possible scenarios.</p><p>For instance, we might want to create an empty table backed by Druid using a <em>CREATE TABLE</em> statement and then append and overwrite data using <em>INSERT</em> and <em>INSERT OVERWRITE</em> Hive statements, respectively.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">CREATE EXTERNAL TABLE druid_table_1
(`__time` TIMESTAMP, `dimension1` STRING, `dimension2` STRING, `metric1` INT, `metric2` FLOAT)
STORED BY 'org.apache.hadoop.hive.druid.DruidStorageHandler';
</pre>
</div></div><p>Another possible scenario is that our data is stored in Hive tables and we want to preprocess it and create Druid datasources from Hive to accelerate our SQL query workload. We can do that by executing a <em>Create Table As Select</em> (CTAS) statement. For example:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">CREATE EXTERNAL TABLE druid_table_1
STORED BY 'org.apache.hadoop.hive.druid.DruidStorageHandler'
AS
&lt;select `timecolumn` as `__time`, `dimension1`, `dimension2`, `metric1`, `metric2`....&gt;;</pre>
</div></div><p>Observe that we still create three different groups of columns corresponding to the Druid categories: the <strong>timestamp</strong> column (<code>__time</code>) mandatory in Druid, the <strong>dimension</strong> columns (whose type is STRING), and the <strong>metrics</strong> columns (all the rest).</p><p>In both statements, the column types (either specified statically for <em>CREATE TABLE</em> statements or inferred from the query result for <em>CTAS</em> statements) are used to infer the corresponding Druid column category.</p><p>Further, note that if we do not specify <span>the value for the</span><span> </span><code>druid.datasource</code><span> property, Hive automatically uses the fully qualified name of the table to create the corresponding datasource with the same name.</span></p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Version Info</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong><span style="color: rgb(51,51,51);">Version 2.2.0: CREATE TABLE syntax when data is managed via hive. </span></strong></p><p><br/></p><pre>CREATE TABLE druid_table_1
(`__time` TIMESTAMP, `dimension1` STRING, `dimension2` STRING, `metric1` INT, `metric2` FLOAT)
STORED BY 'org.apache.hadoop.hive.druid.DruidStorageHandler';</pre><p><span style="color: rgb(51,51,51);"><br/></span></p><p><span style="color: rgb(51,51,51);"> NOTE - Before Hive 3.0.0, we do not use <em>EXTERNAL</em> tables and do not specify the value for the <code>druid.datasource</code> property. </span></p><p><span style="color: rgb(51,51,51);"><strong>For versions 3.0.0+, All Druid tables are EXTERNAL (<a href="https://issues.apache.org/jira/browse/HIVE-20085" class="external-link" rel="nofollow">HIVE-20085</a>). </strong><br/></span></p></div></div><p><span><br/></span></p><h3 id="DruidIntegration-DruidkafkaingestionfromHive">Druid kafka ingestion from Hive</h3><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Version Info</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span>Integration with Druid Kafka Indexing Service is introduced in Hive 3.0.0 (<a href="https://jira.apache.org/jira/browse/HIVE-18976" class="external-link" rel="nofollow">HIVE-18976</a></span><span>).</span></p></div></div><p><a href="http://druid.io/docs/latest/development/extensions-core/kafka-ingestion.html" class="external-link" rel="nofollow"><br/>Druid Kafka Indexing Service</a> supports exactly-once <span style="color: rgb(68,68,68);">ingestion from Kafka topic by managing the creation and lifetime of Kafka indexing tasks. We can manage Druid Kafka Ingestion using Hive <em>CREATE TABLE</em> statement as shown below.</span></p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Druid Kafka Ingestion</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: sql; gutter: false; theme: Default" data-theme="Default">CREATE EXTERNAL TABLE druid_kafka_table_1(`__time` timestamp,`dimension1` string, `dimension1` string, `metric1` int, `metric2 double ....)
        STORED BY 'org.apache.hadoop.hive.druid.DruidStorageHandler'
        TBLPROPERTIES (
        &quot;kafka.bootstrap.servers&quot; = &quot;localhost:9092&quot;,
        &quot;kafka.topic&quot; = &quot;topic1&quot;,
        &quot;druid.kafka.ingestion.useEarliestOffset&quot; = &quot;true&quot;,
        &quot;druid.kafka.ingestion.maxRowsInMemory&quot; = &quot;5&quot;,
        &quot;druid.kafka.ingestion.startDelay&quot; = &quot;PT1S&quot;,
        &quot;druid.kafka.ingestion.period&quot; = &quot;PT1S&quot;,
        &quot;druid.kafka.ingestion.consumer.retries&quot; = &quot;2&quot;
        );

</pre>
</div></div><p><span style="color: rgb(68,68,68);"> </span></p><p><span style="color: rgb(68,68,68);">Observe that we specified kafka topic name and kafka bootstrap servers as part of the table properties. Other tunings for <a href="http://druid.io/docs/latest/development/extensions-core/kafka-ingestion.html" class="external-link" rel="nofollow">Druid Kafka Indexing Service</a> can also be specified by prefixing them with<em> 'druid.kafka.ingestion.'  e.g.</em> to configure duration of druid ingestion tasks we can add<em> </em></span><em>&quot;druid.kafka.ingestion.taskDuration&quot; = &quot;PT60S&quot;</em> as a table property. </p><h5 id="DruidIntegration-Start/Stop/ResetDruidKafkaingestion">Start/Stop/Reset Druid Kafka ingestion </h5><p>We can Start/Stop/Reset druid kafka ingestion using sql statement shown below. </p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: sql; gutter: false; theme: Default" data-theme="Default">ALTER TABLE druid_kafka_test SET TBLPROPERTIES('druid.kafka.ingestion' = 'START');
ALTER TABLE druid_kafka_test SET TBLPROPERTIES('druid.kafka.ingestion' = 'STOP');
ALTER TABLE druid_kafka_test SET TBLPROPERTIES('druid.kafka.ingestion' = 'RESET');</pre>
</div></div><p>Note: Reseting the ingestion will <span style="color: rgb(68,68,68);">reset the kafka consumer offset maintained by druid to the next offset. <span style="color: rgb(68,68,68);">The consumer offsets maintained by druid will be reset to either the earliest or latest offset depending on </span></span><em>druid.kafka.ingestion.useEarliestOffset</em></p><p><span style="color: rgb(68,68,68);"><span style="color: rgb(68,68,68);"> table property. This can cause duplicate/missing events. We typically only need to reset kafka ingestion <span style="color: rgb(68,68,68);">when messages in Kafka at the current consumer offsets are no longer available for consumption and therefore won't be ingested into Druid.</span></span></span></p><h3 id="DruidIntegration-INSERT,INSERTOVERWRITEandDROPstatements">INSERT, INSERT OVERWRITE and DROP statements</h3><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Version Info</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>Version 2.2.0 : These statements are supported by Hive managed tables (not external) backed by Druid.</strong></p><p><strong>For versions 3.0.0+, All Druid tables are EXTERNAL (<a href="https://issues.apache.org/jira/browse/HIVE-20085" class="external-link" rel="nofollow">HIVE-20085</a>) and these statements are supported for any table. </strong></p></div></div><p><strong><span style="font-size: 20.0px;letter-spacing: 0.0px;">Querying Druid from Hive</span></strong></p><p>Once we have created our first table stored in Druid using the <code>DruidStorageHandler</code>, we are ready to execute our queries against Druid.</p><p>When we express a query over a Druid table, Hive tries to <em>rewrite</em> the query to be executed efficiently by pushing as much computation as possible to Druid. This task is accomplished by the <a href="Cost-based%2boptimization%2bin%2bHive.html" rel="nofollow">cost optimizer</a> based in <a href="http://calcite.apache.org/" class="external-link" rel="nofollow">Apache Calcite</a>, which identifies patterns in the plan and apply rules to rewrite the input query into a new equivalent query with (hopefully) more operations executed in Druid.</p><p>In particular, we implemented our extension to the optimizer in <a href="https://issues.apache.org/jira/browse/HIVE-14217" class="external-link" rel="nofollow">HIVE-14217</a>, which builds upon the work initiated in <a href="https://issues.apache.org/jira/browse/CALCITE-1121" class="external-link" rel="nofollow">CALCITE-1121</a>, and extends its logic to identify more complex query patterns (<em>timeseries</em> queries), translate filters on the <em>time</em> dimension to Druid intervals, push limit into Druid <em>select</em> queries, etc.</p><p>Currently, we support the recognition of <em>timeseries</em>, <em>groupBy,</em> and s<em><em>elect</em></em> queries.</p><p>Once we have completed the optimization, the (sub)plan of operators that needs to be executed by Druid is translated into a valid Druid JSON query, and passed as a property to the Hive physical TableScan operator. The Druid query will be executed within the TableScan operator, which will generate the records out of the Druid query results.</p><p>We generate a single Hive split with the corresponding Druid query for <em>timeseries </em>and <em>groupBy</em>, from which we generate the records. Thus, the degree of parallelism is 1 in these cases. However, for simple <em>select</em> queries without limit (although they might still contain filters or projections), we partition the original query into <em>x</em> queries and generate one split for each of them, thus incrementing the degree of parallelism for these queries, which usually return a large number of results, to <em>x</em>.</p><p> </p><p>Consider that depending on the query, it might not be possible to push any computation to Druid. However, <em>our contract is that the query should always be executed</em>. Thus, in those cases, Hive will send a <em>select</em> query to Druid, which basically will read all the segments from Druid, generate records, and then execute the rest of Hive operations on those records. This is also the approach that will be followed if the cost optimizer is disabled (<em><strong>not recommended</strong></em>).</p><h3 id="DruidIntegration-QueriescompletelyexecutedinDruid">Queries completely executed in Druid</h3><p>We focus first on queries that can be pushed completely into Druid. In these cases, we end up with a simple plan consisting of a TableScan and a Fetch operator on top. Thus, there is no overhead related to launching containers for the execution.</p><h4 id="DruidIntegration-Selectqueries">Select queries</h4><p>We start with the simplest type of Druid query: <em><a href="http://druid.io/docs/0.9.1.1/querying/selectquery.html" class="external-link" rel="nofollow">select</a></em> queries. Basically, a <em>select</em> query will be equivalent to a scan operation on the data sources, although operations such as projection, filter, or limit can still be pushed into this type of query.</p><p>Consider the following query, a simple select query for 10 rows consisting of all the columns of the table:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">SELECT * FROM druid_table_1 LIMIT 10;</pre>
</div></div><p>The Hive plan for the query will be the following:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">hive&gt; EXPLAIN
    &gt; SELECT * FROM druid_table_1 LIMIT 10;
OK
Plan optimized by CBO.
Stage-0
  Fetch Operator
    limit:-1
    Select Operator [SEL_1]
      Output:[&quot;_col0&quot;,&quot;_col1&quot;,&quot;_col2&quot;,&quot;_col3&quot;,&quot;_col4&quot;,&quot;_col5&quot;,&quot;_col6&quot;,&quot;_col7&quot;,&quot;_col8&quot;,&quot;_col9&quot;,&quot;_col10&quot;,&quot;_col11&quot;,&quot;_col12&quot;,&quot;_col13&quot;,&quot;_col14&quot;,&quot;_col15&quot;,&quot;_col16&quot;,&quot;_col17&quot;,&quot;_col18&quot;,&quot;_col19&quot;,&quot;_col20&quot;,&quot;_col21&quot;]
      TableScan [TS_0]
        Output:[&quot;__time&quot;,&quot;added&quot;,&quot;channel&quot;,&quot;cityname&quot;,&quot;comment&quot;,&quot;count&quot;,&quot;countryisocode&quot;,&quot;countryname&quot;,&quot;deleted&quot;,&quot;delta&quot;,&quot;isanonymous&quot;,&quot;isminor&quot;,&quot;isnew&quot;,&quot;isrobot&quot;,&quot;isunpatrolled&quot;,&quot;metrocode&quot;,&quot;namespace&quot;,&quot;page&quot;,&quot;regionisocode&quot;,&quot;regionname&quot;,&quot;user&quot;,&quot;user_unique&quot;],properties:{&quot;druid.query.json&quot;:&quot;{\&quot;queryType\&quot;:\&quot;select\&quot;,\&quot;dataSource\&quot;:\&quot;wikiticker\&quot;,\&quot;descending\&quot;:\&quot;false\&quot;,\&quot;intervals\&quot;:[\&quot;-146136543-09-08T08:22:17.096-00:01:15/146140482-04-24T16:36:27.903+01:00\&quot;],\&quot;dimensions\&quot;:[\&quot;channel\&quot;,\&quot;cityname\&quot;,\&quot;comment\&quot;,\&quot;countryisocode\&quot;,\&quot;countryname\&quot;,\&quot;isanonymous\&quot;,\&quot;isminor\&quot;,\&quot;isnew\&quot;,\&quot;isrobot\&quot;,\&quot;isunpatrolled\&quot;,\&quot;metrocode\&quot;,\&quot;namespace\&quot;,\&quot;page\&quot;,\&quot;regionisocode\&quot;,\&quot;regionname\&quot;,\&quot;user\&quot;,\&quot;user_unique\&quot;],\&quot;metrics\&quot;:[\&quot;added\&quot;,\&quot;count\&quot;,\&quot;deleted\&quot;,\&quot;delta\&quot;],\&quot;pagingSpec\&quot;:{\&quot;threshold\&quot;:10},\&quot;context\&quot;:{\&quot;druid.query.fetch\&quot;:true}}&quot;,&quot;druid.query.type&quot;:&quot;select&quot;}
Time taken: 0.141 seconds, Fetched: 10 row(s)</pre>
</div></div><p>Observe that the Druid query is in the properties attached to the TableScan. For readability, we format it properly:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">{
  &quot;queryType&quot;:&quot;select&quot;,
  &quot;dataSource&quot;:&quot;wikiticker&quot;,
  &quot;descending&quot;:&quot;false&quot;,
  &quot;intervals&quot;:[&quot;-146136543-09-08T08:22:17.096-00:01:15/146140482-04-24T16:36:27.903+01:00&quot;],
  &quot;dimensions&quot;: 
    [&quot;channel&quot;,&quot;cityname&quot;,&quot;comment&quot;,&quot;countryisocode&quot;,
     &quot;countryname&quot;,&quot;isanonymous&quot;,&quot;isminor&quot;,&quot;isnew&quot;,
     &quot;isrobot&quot;,&quot;isunpatrolled&quot;,&quot;metrocode&quot;,&quot;namespace&quot;,
     &quot;page&quot;,&quot;regionisocode&quot;,&quot;regionname&quot;,&quot;user&quot;,&quot;user_unique&quot;
    ],
  &quot;metrics&quot;:[&quot;added&quot;,&quot;count&quot;,&quot;deleted&quot;,&quot;delta&quot;],
  &quot;pagingSpec&quot;:{&quot;threshold&quot;:10}
}</pre>
</div></div><p>Observe that we get to push the limit into the Druid query (<code>threshold</code>). Observe as well that as we do not specify a filter on the timestamp dimension for the data source, we generate an interval that covers the range (−∞,+∞).</p><p> </p><p>In Druid, the timestamp column plays a central role. In fact, Druid allows to filter on the time dimension using the <code>intervals</code> property for all those queries. This is very important, as the time intervals determine the nodes that store the Druid data. Thus, specifying a precise range minimizes the number of nodes hit by the broken for a certain query. Inspired by Druid <a href="https://github.com/druid-io/druid/pull/2880" class="external-link" rel="nofollow">PR-2880</a>, we implemented the intervals extraction from the filter conditions in the logical plan of a query. For instance, consider the following query:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">SELECT `__time`
FROM druid_table_1
WHERE `__time` &gt;= '2010-01-01 00:00:00' AND `__time` &lt;= '2011-01-01 00:00:00'
LIMIT 10;</pre>
</div></div><p>The Druid query generated for the SQL query above is the following (we omit the plan, as it is a simple TableScan operator).</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">{
  &quot;queryType&quot;:&quot;select&quot;,
  &quot;dataSource&quot;:&quot;wikiticker&quot;,
  &quot;descending&quot;:&quot;false&quot;,
  &quot;intervals&quot;:[&quot;2010-01-01T00:00:00.000Z/2011-01-01T00:00:00.001Z&quot;],
  &quot;dimensions&quot;:[],
  &quot;metrics&quot;:[],
  &quot;pagingSpec&quot;:{&quot;threshold&quot;:10}
}</pre>
</div></div><p>Observe that we infer correctly the interval for the specified dates, <code>2010-01-01T00:00:00.000Z/2011-01-01T00:00:00.001Z</code>, because in Druid the starting date of the interval is included, but the closing date is not. We also support recognition of multiple interval ranges, for instance in the following SQL query:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">SELECT `__time`
FROM druid_table_1
WHERE (`__time` BETWEEN '2010-01-01 00:00:00' AND '2011-01-01 00:00:00')
    OR (`__time` BETWEEN '2012-01-01 00:00:00' AND '2013-01-01 00:00:00')
LIMIT 10;</pre>
</div></div><p>Furthermore we can infer overlapping intervals too. Finally, the filters that are not specified on the time dimension will be translated into valid Druid filters and included within the query using the <code>filter</code> property.</p><h4 id="DruidIntegration-Timeseriesqueries"><span style="font-weight: bold;line-height: 1.42857;">Timeseries queries</span></h4><p><em><a href="http://druid.io/docs/0.9.1.1/querying/timeseriesquery.html" class="external-link" rel="nofollow">Timeseries</a></em> is one of the types of queries that Druid can execute very efficiently. The following SQL query translates directly into a Druid <em>timeseries</em> query:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">-- GRANULARITY: MONTH
SELECT `floor_month`(`__time`), max(delta), sum(added)
FROM druid_table_1
GROUP BY `floor_month`(`__time`);</pre>
</div></div><p>Basically, we group by a given time granularity and calculate the aggregation results for each resulting group. In particular, the <code>floor_month</code> function over the timestamp dimension __<code>time</code> represents the Druid month granularity format. Currently, we support <span><code>floor_year</code>, <code>floor_quarter</code>, <code>floor_month</code>, <code>floor_week</code>, <code>floor_day</code>, <code>floor_hour</code>, <code>floor_minute</code>, and <code>floor_second</code> granularities. In addition, we support two special types of granularities, <code>all</code> and <code>none</code>, which we describe below. We plan to extend our integration work to support other important Druid custom granularity constructs, such as <a href="http://druid.io/docs/0.9.1.1/querying/granularities.html" class="external-link" rel="nofollow"><em>duration</em> and <em>period</em> granularities</a>.</span></p><p>The Hive plan for the query will be the following:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">hive&gt; EXPLAIN
    &gt; SELECT `floor_month`(`__time`), max(delta), sum(added)
    &gt; FROM druid_table_1
    &gt; GROUP BY `floor_month`(`__time`);
OK
Plan optimized by CBO.
Stage-0
  Fetch Operator
    limit:-1
    Select Operator [SEL_1]
      Output:[&quot;_col0&quot;,&quot;_col1&quot;,&quot;_col2&quot;]
      TableScan [TS_0]
        Output:[&quot;__time&quot;,&quot;$f1&quot;,&quot;$f2&quot;],
        properties:{&quot;druid.query.json&quot;:&quot;{\&quot;queryType\&quot;:\&quot;timeseries\&quot;,\&quot;dataSource\&quot;:\&quot;wikiticker\&quot;,\&quot;descending\&quot;:\&quot;false\&quot;,\&quot;granularity\&quot;:\&quot;MONTH\&quot;,\&quot;aggregations\&quot;:[{\&quot;type\&quot;:\&quot;longMax\&quot;,\&quot;name\&quot;:\&quot;$f1\&quot;,\&quot;fieldName\&quot;:\&quot;delta\&quot;},{\&quot;type\&quot;:\&quot;longSum\&quot;,\&quot;name\&quot;:\&quot;$f2\&quot;,\&quot;fieldName\&quot;:\&quot;added\&quot;}],\&quot;intervals\&quot;:[\&quot;-146136543-09-08T08:22:17.096-00:01:15/146140482-04-24T16:36:27.903+01:00\&quot;]}&quot;,&quot;druid.query.type&quot;:&quot;timeseries&quot;}
Time taken: 0.116 seconds, Fetched: 10 row(s)</pre>
</div></div><p>Observe that the Druid query is in the properties attached to the TableScan. For readability, we format it properly:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">{
  &quot;queryType&quot;:&quot;timeseries&quot;,
  &quot;dataSource&quot;:&quot;wikiticker&quot;,
  &quot;descending&quot;:&quot;false&quot;,
  &quot;granularity&quot;:&quot;MONTH&quot;,
  &quot;aggregations&quot;:[
    {&quot;type&quot;:&quot;longMax&quot;, &quot;name&quot;:&quot;$f1&quot;, &quot;fieldName&quot;:&quot;delta&quot;},
    {&quot;type&quot;:&quot;longSum&quot;, &quot;name&quot;:&quot;$f2&quot;, &quot;fieldName&quot;:&quot;added&quot;}
  ],
  &quot;intervals&quot;:[&quot;-146136543-09-08T08:22:17.096-00:01:15/146140482-04-24T16:36:27.903+01:00&quot;]
}</pre>
</div></div><p>Observe that the granularity for the Druid query is <code>MONTH</code>.</p><p> </p><p>One rather special case is <code>all</code> granularity, which we introduce by example below. Consider the following query:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">-- GRANULARITY: ALL
SELECT max(delta), sum(added)
FROM druid_table_1;</pre>
</div></div><p>As it will do an aggregation on the complete dataset, it translates into a <em>timeseries</em> query with granularity <code>all</code>. In particular, the equivalent Druid query attached to the TableScan operator is the following:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">{
  &quot;queryType&quot;:&quot;timeseries&quot;,
  &quot;dataSource&quot;:&quot;wikiticker&quot;,
  &quot;descending&quot;:&quot;false&quot;,
  &quot;granularity&quot;:&quot;ALL&quot;,
  &quot;aggregations&quot;:[
    {&quot;type&quot;:&quot;longMax&quot;, &quot;name&quot;:&quot;$f1&quot;, &quot;fieldName&quot;:&quot;delta&quot;},
    {&quot;type&quot;:&quot;longSum&quot;, &quot;name&quot;:&quot;$f2&quot;, &quot;fieldName&quot;:&quot;added&quot;}
  ],
  &quot;intervals&quot;:[&quot;-146136543-09-08T08:22:17.096-00:01:15/146140482-04-24T16:36:27.903+01:00&quot;]
}</pre>
</div></div><h4 id="DruidIntegration-GroupByqueries">GroupBy queries</h4><p>The final type of queries we currently support is <em><a href="http://druid.io/docs/0.9.1.1/querying/groupbyquery.html" class="external-link" rel="nofollow">groupBy</a></em>. This kind of query is more expressive than <em>timeseries</em> queries; however, they are less performant. Thus, we only fall back to <em>groupBy</em> queries when we cannot transform into <em>timeseries</em> queries.</p><p>For instance, the following SQL query will generate a Druid <em>groupBy</em> query:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">SELECT max(delta), sum(added)
FROM druid_table_1
GROUP BY `channel`, `user`;</pre>
</div></div><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">{
  &quot;queryType&quot;:&quot;groupBy&quot;,
  &quot;dataSource&quot;:&quot;wikiticker&quot;,
  &quot;granularity&quot;:&quot;ALL&quot;,
  &quot;dimensions&quot;:[&quot;channel&quot;,&quot;user&quot;],
  &quot;aggregations&quot;:[
    {&quot;type&quot;:&quot;longMax&quot;,&quot;name&quot;:&quot;$f2&quot;,&quot;fieldName&quot;:&quot;delta&quot;},
    {&quot;type&quot;:&quot;longSum&quot;,&quot;name&quot;:&quot;$f3&quot;,&quot;fieldName&quot;:&quot;added&quot;}],
  &quot;intervals&quot;:[&quot;-146136543-09-08T08:22:17.096-00:01:15/146140482-04-24T16:36:27.903+01:00&quot;]
}</pre>
</div></div><h3 id="DruidIntegration-QueriesacrossDruidandHive">Queries across Druid and Hive</h3><p>Finally, we provide an example of a query that runs across Druid and Hive. In particular, let us create a second table in Hive with some data:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">CREATE TABLE hive_table_1 (col1 INT, col2 STRING);
INSERT INTO hive_table_1 VALUES(1, '#en.wikipedia');</pre>
</div></div><p>Assume we want to execute the following query:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">SELECT a.channel, b.col1
FROM
(
  SELECT `channel`, max(delta) as m, sum(added)
  FROM druid_table_1
  GROUP BY `channel`, `floor_year`(`__time`)
  ORDER BY m DESC
  LIMIT 1000
) a
JOIN
(
  SELECT col1, col2
  FROM hive_table_1
) b
ON a.channel = b.col2;</pre>
</div></div><p>The query is a simple join on columns <code>channel</code> and <code>col2</code>. The subquery <code>a</code> is executed completely in Druid as a <em>groupBy</em> query. Then the results are joined in Hive with the results of results of subquery <code>b</code>. The query plan and execution in Tez is shown in the following:</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Default" data-theme="Default">hive&gt; explain
    &gt; SELECT a.channel, b.col1
    &gt; FROM
    &gt; (
    &gt;   SELECT `channel`, max(delta) as m, sum(added)
    &gt;   FROM druid_table_1
    &gt;   GROUP BY `channel`, `floor_year`(`__time`)
    &gt;   ORDER BY m DESC
    &gt;   LIMIT 1000
    &gt; ) a
    &gt; JOIN
    &gt; (
    &gt;   SELECT col1, col2
    &gt;   FROM hive_table_1
    &gt; ) b
    &gt; ON a.channel = b.col2;
OK
Plan optimized by CBO.
Vertex dependency in root stage
Map 2 &lt;- Map 1 (BROADCAST_EDGE)
Stage-0
  Fetch Operator
    limit:-1
    Stage-1
      Map 2
      File Output Operator [FS_11]
        Select Operator [SEL_10] (rows=1 width=0)
          Output:[&quot;_col0&quot;,&quot;_col1&quot;]
          Map Join Operator [MAPJOIN_16] (rows=1 width=0)
            Conds:RS_7._col0=SEL_6._col1(Inner),HybridGraceHashJoin:true,Output:[&quot;_col0&quot;,&quot;_col2&quot;]
          &lt;-Map 1 [BROADCAST_EDGE]
            BROADCAST [RS_7]
              PartitionCols:_col0
              Filter Operator [FIL_2] (rows=1 width=0)
                predicate:_col0 is not null
                Select Operator [SEL_1] (rows=1 width=0)
                  Output:[&quot;_col0&quot;]
                  TableScan [TS_0] (rows=1 width=0)
                    druid@druid_table_1,druid_table_1,Tbl:PARTIAL,Col:NONE,Output:[&quot;channel&quot;],properties:{&quot;druid.query.json&quot;:&quot;{\&quot;queryType\&quot;:\&quot;groupBy\&quot;,\&quot;dataSource\&quot;:\&quot;wikiticker\&quot;,\&quot;granularity\&quot;:\&quot;all\&quot;,\&quot;dimensions\&quot;:[{\&quot;type\&quot;:\&quot;default\&quot;,\&quot;dimension\&quot;:\&quot;channel\&quot;},{\&quot;type\&quot;:\&quot;extraction\&quot;,\&quot;dimension\&quot;:\&quot;__time\&quot;,\&quot;outputName\&quot;:\&quot;floor_year\&quot;,\&quot;extractionFn\&quot;:{\&quot;type\&quot;:\&quot;timeFormat\&quot;,\&quot;format\&quot;:\&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\&quot;,\&quot;granularity\&quot;:\&quot;year\&quot;,\&quot;timeZone\&quot;:\&quot;UTC\&quot;,\&quot;locale\&quot;:\&quot;en-US\&quot;}}],\&quot;limitSpec\&quot;:{\&quot;type\&quot;:\&quot;default\&quot;,\&quot;limit\&quot;:1000,\&quot;columns\&quot;:[{\&quot;dimension\&quot;:\&quot;$f2\&quot;,\&quot;direction\&quot;:\&quot;descending\&quot;,\&quot;dimensionOrder\&quot;:\&quot;numeric\&quot;}]},\&quot;aggregations\&quot;:[{\&quot;type\&quot;:\&quot;doubleMax\&quot;,\&quot;name\&quot;:\&quot;$f2\&quot;,\&quot;fieldName\&quot;:\&quot;delta\&quot;},{\&quot;type\&quot;:\&quot;doubleSum\&quot;,\&quot;name\&quot;:\&quot;$f3\&quot;,\&quot;fieldName\&quot;:\&quot;added\&quot;}],\&quot;intervals\&quot;:[\&quot;1900-01-01T00:00:00.000/3000-01-01T00:00:00.000\&quot;]}&quot;,&quot;druid.query.type&quot;:&quot;groupBy&quot;}
          &lt;-Select Operator [SEL_6] (rows=1 width=15)
              Output:[&quot;_col0&quot;,&quot;_col1&quot;]
              Filter Operator [FIL_15] (rows=1 width=15)
                predicate:col2 is not null
                TableScan [TS_4] (rows=1 width=15)
                  druid@hive_table_1,hive_table_1,Tbl:COMPLETE,Col:NONE,Output:[&quot;col1&quot;,&quot;col2&quot;]
Time taken: 0.924 seconds, Fetched: 31 row(s)
hive&gt; SELECT a.channel, b.col1
    &gt; FROM
    &gt; (
    &gt;   SELECT `channel`, max(delta) as m, sum(added)
    &gt;   FROM druid_table_1
    &gt;   GROUP BY `channel`, `floor_year`(`__time`)
    &gt;   ORDER BY m DESC
    &gt;   LIMIT 1000
    &gt; ) a
    &gt; JOIN
    &gt; (
    &gt;   SELECT col1, col2
    &gt;   FROM hive_table_1
    &gt; ) b
    &gt; ON a.channel = b.col2;
Query ID = user1_20160818202329_e9a8b3e8-18d3-49c7-bfe0-99d38d2402d3
Total jobs = 1
Launching Job 1 out of 1
2016-08-18 20:23:30 Running Dag: dag_1471548210492_0001_1
2016-08-18 20:23:30 Starting to run new task attempt: attempt_1471548210492_0001_1_00_000000_0
Status: Running (Executing on YARN cluster with App id application_1471548210492_0001)
----------------------------------------------------------------------------------------------
        VERTICES      MODE        STATUS  TOTAL  COMPLETED  RUNNING  PENDING  FAILED  KILLED
----------------------------------------------------------------------------------------------
Map 1 .......... container     SUCCEEDED      1          1        0        0       0       0
Map 2 .......... container     SUCCEEDED      1          1        0        0       0       0
----------------------------------------------------------------------------------------------
VERTICES: 02/02  [==========================&gt;&gt;] 100%  ELAPSED TIME: 0.15 s
----------------------------------------------------------------------------------------------
2016-08-18 20:23:31 Completed running task attempt: attempt_1471548210492_0001_1_00_000000_0
OK
#en.wikipedia	1
Time taken: 1.835 seconds, Fetched: 2 row(s)</pre>
</div></div><p> </p><h1 id="DruidIntegration-OpenIssues(JIRA)">Open Issues (JIRA)</h1><p>





<div id="refresh-module-965118716" class="refresh-module-id jira-table conf-macro output-block" data-client-id="TABLE_5aa69414-a9e9-3523-82ec-879b028fb15b_65866491_anonymous_cHJvamVjdCA9IEhpdmUgQU5EIGNvbXBvbmVudCA9IDEyMzMwODYzICBhbmQgcmVzb2x1dGlvbiA9IFVucmVzb2x2ZWQgT1JERVIgQlkga2V5IEFTQyA=_a2V5c3VtbWFyeXR5cGVjcmVhdGVkdXBkYXRlZGR1ZWFzc2lnbmVlcmVwb3J0ZXJwcmlvcml0eXN0YXR1c3Jlc29sdXRpb24=" data-jira-key="issue-table-TABLE_5aa69414-a9e9-3523-82ec-879b028fb15b_65866491_anonymous_cHJvamVjdCA9IEhpdmUgQU5EIGNvbXBvbmVudCA9IDEyMzMwODYzICBhbmQgcmVzb2x1dGlvbiA9IFVucmVzb2x2ZWQgT1JERVIgQlkga2V5IEFTQyA=_a2V5c3VtbWFyeXR5cGVjcmVhdGVkdXBkYXRlZGR1ZWFzc2lnbmVlcmVwb3J0ZXJwcmlvcml0eXN0YXR1c3Jlc29sdXRpb24=" data-hasbody="false" data-macro-name="jira">
<p>
            </p><div id="refresh-965118716" class="refresh-macro">
        </div>
    
        
    
        
    <div id="jira-issues-965118716" style="width: 100%;  overflow: auto;" class="jira-issues">
        <table class="aui">
            <tbody>
                <tr> </tr>                 <tr>
                                                                        <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Key
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Summary
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">T
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Created
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Updated
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Due
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Assignee
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Reporter
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">P
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Status
                            </th>
                                                                                                <th style="text-align: left;" class="jira-macro-table-underline-pdfexport">Resolution
                            </th>
                                                            </tr>
                                            </tbody>
        </table>
    </div>
            <div class="refresh-issues-bottom">
                                        <span class="refresh-action-group">
                        <div id="refresh-issues-loading-965118716" class="button-spinner refresh-issues-loading">
                            <span class="aui-icon aui-icon-wait">Loading...</span>
                        </div>
                        <a id="refresh-issues-button-965118716" class="icon icon-refresh refresh-action refresh-issues-button" rel="nofollow"> </a>
                        <a id="refresh-issues-link-965118716" class="refresh-action refresh-issues-link" rel="nofollow">Refresh</a>
                        <span id="error-message-965118716" class="error-message hidden"> </span>
                        <input type="hidden" class="refresh-wiki" id="refresh-wiki-965118716" data-wikimarkup="&lt;ac:structured-macro ac:name=&quot;jira&quot; ac:schema-version=&quot;1&quot; ac:macro-id=&quot;086776b6-2e73-4926-beb2-dcf26b623df2&quot;>&lt;ac:parameter ac:name=&quot;server&quot;>ASF JIRA&lt;/ac:parameter>&lt;ac:parameter ac:name=&quot;columns&quot;>key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution&lt;/ac:parameter>&lt;ac:parameter ac:name=&quot;maximumIssues&quot;>20&lt;/ac:parameter>&lt;ac:parameter ac:name=&quot;jqlQuery&quot;>project = Hive AND component = 12330863  and resolution = Unresolved ORDER BY key ASC &lt;/ac:parameter>&lt;ac:parameter ac:name=&quot;serverId&quot;>5aa69414-a9e9-3523-82ec-879b028fb15b&lt;/ac:parameter>&lt;ac:parameter ac:name=&quot;: = | RAW | = :&quot;>server=ASF JIRA|columns=key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution|maximumIssues=20|jqlQuery=project = Hive AND component = 12330863  and resolution = Unresolved ORDER BY key ASC |serverId=5aa69414-a9e9-3523-82ec-879b028fb15b&lt;/ac:parameter>&lt;ac:parameter ac:name=&quot;: = | TOKEN_TYPE | = :&quot;>BLOCK&lt;/ac:parameter>&lt;/ac:structured-macro>" data-pageid="65866491" />
                    </span>
                    </div>
        <p> </p>

            <div class="jim-sortable-dark-layout"> </div>
    
</div>
</p>

                
        
    
        </div>

                        
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="65866491" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div>
        
		
            




            
        








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>
        


                
    
            
</div>

    

    




    
    

    
    
    


    
<div id="space-tools-web-items" class="hidden">
                <div data-label="Overview" data-href="/confluence/spaces/viewspacesummary.action?key=Hive">Overview</div>
            <div data-label="Content Tools" data-href="/confluence/pages/reorderpages.action?key=Hive">Content Tools</div>
            <div data-label="Apps" data-href="/confluence/spaces/snippeterrors.action?key=Hive">Apps</div>
    </div>
        



            </div><!-- \#main -->
            
    
    
        
            
            

<div id="footer" role="contentinfo">
    <section class="footer-body">

                                                            <p class="license license-opensource">
                    Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to Apache Software Foundation. <a href="https://www.atlassian.com/software/views/opensource-community-additional-license-offer">Evaluate Confluence today</a>.<br>
                </p>
                    
        

        <ul id="poweredby">
            <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link" rel="nofollow">Atlassian Confluence</a> <span id='footer-build-information'>7.13.2</span></li>
            <li class="print-only">Printed by Atlassian Confluence 7.13.2</li>
            <li class="noprint"><a href="https://support.atlassian.com/help/confluence" class="hover-footer-link" rel="nofollow">Report a bug</a></li>
            <li class="noprint"><a href="https://www.atlassian.com/company" class="hover-footer-link" rel="nofollow">Atlassian News</a></li>
        </ul>

        

        <div id="footer-logo"><a href="http://www.atlassian.com/" rel="nofollow">Atlassian</a></div>

                    
        
    </section>
</div>

    
</div>

</div><!-- \#full-height-container -->
</div><!-- \#page -->

    <span style="display:none;" id="confluence-server-performance">{"serverDuration": 94, "requestCorrelationId": "ebe34e57cb0e72a2"}</span>
</body>

<!-- Mirrored from cwiki.apache.org/confluence/display/Hive/Druid+Integration by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 15 Dec 2021 19:40:15 GMT -->
</html>
    
